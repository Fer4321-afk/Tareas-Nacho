{% extends "base.html" %} {% block content %}
<h1>{{ game.room_name }}</h1>
<p>Jugador actual: {{ request.user.username }}</p>

{% if game.state == "active" %} {% if request.user == game.owner %}
<form method="POST">
  {% csrf_token %}
  <div
    style="display: grid; grid-template-columns: repeat(3, 100px); gap: 10px"
  >
    {% for i in "012345678" %} {% with i_int=i|add:"0"|int %} {% if
    game.board|slice:i_int|first == " " %}
    <button
      type="submit"
      name="move"
      value="{{ i_int }}"
      style="height: 100px; font-size: 2rem"
    >
      â¬œ
    </button>
    {% else %}
    <div
      style="
        height: 100px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2rem;
      "
    >
      {% if game.board|slice:i_int|first == "X" %}âŒ{% else %}â­•{% endif %}
    </div>
    {% endif %} {% endwith %} {% endfor %}
  </div>
</form>
{% else %}
<p>Solo el propietario puede jugar. EstÃ¡s en modo espectador ğŸ‘€</p>
<div style="display: grid; grid-template-columns: repeat(3, 100px); gap: 10px">
  {% for i in "012345678" %} {% with i_int=i|add:"0"|int %}
  <div
    style="
      height: 100px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
    "
  >
    {% if game.board|slice:i_int|first == " " %}â¬œ{% elif
    game.board|slice:i_int|first == "X" %}âŒ{% else %}â­•{% endif %}
  </div>
  {% endwith %} {% endfor %}
</div>
{% endif %} {% else %}
<h2>
  {% if game.state == "tie" %}ğŸ¤ Â¡Empate!{% else %}ğŸ† Ganador: {{ game.winner
  }}{% endif %}
</h2>
{% if request.user == game.owner %}
<form method="POST">
  {% csrf_token %}
  <button type="submit" name="delete" value="1">Cerrar sala</button>
</form>
{% endif %} {% endif %} {% endblock %}
